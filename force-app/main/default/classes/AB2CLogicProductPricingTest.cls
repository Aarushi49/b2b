@isTest class AB2CLogicProductPricingTest {
    @isTest static void testProductPrice() {
        AB2CLogicProductPricing service = new AB2CLogicProductPricing();

        string jsonInput = '{"allowChildless":false,"basePriceListItems":{"a1i54000007nlNEAAY":[{"endDate":"2099-12-31","price":29.99,"pricelist":"a1U54000000FO9eEAG","pricelistItemId":"bas-2495-1324-2x4-protection-STDPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Standard Price List","sfid":"a1U54000000FO9eEAG"},"product":"a1i54000007nlNEAAY","productR":{"sfid":"a1i54000007nlNEAAY","SKU":"bas-2495-1324-2x4-PROTECTION"},"recurringPrice":false,"sfdcName":"031134","sfid":"a1T54000002Td2LEAS","startDate":"2020-01-27"}],"a1i54000007nlNFAAY":[{"endDate":"2099-12-31","price":99.99,"pricelist":"a1U54000000FO9eEAG","pricelistItemId":"bas-2495-1324-9x12-protection-STDPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Standard Price List","sfid":"a1U54000000FO9eEAG"},"product":"a1i54000007nlNFAAY","productR":{"sfid":"a1i54000007nlNFAAY","SKU":"bas-2495-1324-9x12-PROTECTION"},"recurringPrice":false,"sfdcName":"031135","sfid":"a1T54000002Td2MEAS","startDate":"2020-01-27"}],"a1i54000007NnmBAAS":[{"endDate":"2099-12-31","price":0,"pricelist":"a1U54000000FO9eEAG","pricelistItemId":"bas-2495-STDPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Standard Price List","sfid":"a1U54000000FO9eEAG"},"product":"a1i54000007NnmBAAS","productR":{"sfid":"a1i54000007NnmBAAS","SKU":"bas-2495"},"recurringPrice":false,"sfdcName":"021057","sfid":"a1T54000002CSN4EAO","startDate":"2020-01-27"}],"a1i54000007NnmCAAS":[{"endDate":"2099-12-31","price":69,"pricelist":"a1U54000000FO9eEAG","pricelistItemId":"bas-2495-1324-2x4-STDPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Standard Price List","sfid":"a1U54000000FO9eEAG"},"product":"a1i54000007NnmCAAS","productR":{"sfid":"a1i54000007NnmCAAS","SKU":"bas-2495-1324-2x4"},"recurringPrice":false,"sfdcName":"021058","sfid":"a1T54000002CSN5EAO","startDate":"2020-01-27"}],"a1i54000007NnmDAAS":[{"endDate":"2099-12-31","price":399,"pricelist":"a1U54000000FO9eEAG","pricelistItemId":"bas-2495-1324-5x8-STDPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Standard Price List","sfid":"a1U54000000FO9eEAG"},"product":"a1i54000007NnmDAAS","productR":{"sfid":"a1i54000007NnmDAAS","SKU":"bas-2495-1324-5x8"},"recurringPrice":false,"sfdcName":"021059","sfid":"a1T54000002CSN6EAO","startDate":"2020-01-27"}],"a1i54000007NnmEAAS":[{"endDate":"2099-12-31","price":629,"pricelist":"a1U54000000FO9eEAG","pricelistItemId":"bas-2495-1324-7x10-STDPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Standard Price List","sfid":"a1U54000000FO9eEAG"},"product":"a1i54000007NnmEAAS","productR":{"sfid":"a1i54000007NnmEAAS","SKU":"bas-2495-1324-7x10"},"recurringPrice":false,"sfdcName":"021060","sfid":"a1T54000002CSN7EAO","startDate":"2020-01-27"}],"a1i54000007NnmFAAS":[{"endDate":"2099-12-31","price":819,"pricelist":"a1U54000000FO9eEAG","pricelistItemId":"bas-2495-1324-8x11-STDPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Standard Price List","sfid":"a1U54000000FO9eEAG"},"product":"a1i54000007NnmFAAS","productR":{"sfid":"a1i54000007NnmFAAS","SKU":"bas-2495-1324-8x11"},"recurringPrice":false,"sfdcName":"021061","sfid":"a1T54000002CSN8EAO","startDate":"2020-01-27"}],"a1i54000007NnmGAAS":[{"endDate":"2099-12-31","price":1089,"pricelist":"a1U54000000FO9eEAG","pricelistItemId":"bas-2495-1324-9x12-STDPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Standard Price List","sfid":"a1U54000000FO9eEAG"},"product":"a1i54000007NnmGAAS","productR":{"sfid":"a1i54000007NnmGAAS","SKU":"bas-2495-1324-9x12"},"recurringPrice":false,"sfdcName":"021062","sfid":"a1T54000002CSN9EAO","startDate":"2020-01-27"}]},"basePriceLists":{"a1U54000000FO9eEAG":{"currencyISOCode":"CAD","enabled":true,"endDate":"2099-12-31","pricelistId":"STDPRICELIST","sfdcName":"Standard Price List","sfid":"a1U54000000FO9eEAG","startDate":"2020-01-27","storefront":"DefaultStore;AlexanianStore"}},"cpParentTypesToExclude":[],"currencyCode":"CAD","effectiveDate":"2021-05-31T15:50:04.847Z","evaluationMode":"bestPrice","includeBase":true,"includeSellers":false,"isBreakdown":false,"originalInputData":{"cpParentTypesToExclude":[],"includeBase":true,"includeSellers":false,"mediaFilter":["Product Search Image"],"parseAttrPricingJSON":true,"prodDateFilter":true,"prodIncludeAttrPricing":false,"productList":[{"AB2CInStoreOnly":false,"AB2CIsComponent":false,"AB2CShowPerLinearFoot":false,"AB2CShowSquareFootageCalculator":false,"compositeProductsS":[{"AB2CComponentQuantity":1,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007NnmCAAS","componentR":{"SEOId":"2495-Basha-KL","sfid":"a1i54000007NnmCAAS","SKU":"bas-2495-1324-2x4"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-2x4-composite","optional":false,"quantity":1,"sequence":1,"sfdcName":"CP-02993","sfid":"a0O54000003YNT4EAO"},{"AB2CComponentQuantity":1,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007NnmDAAS","componentR":{"SEOId":"2495-Basha-KL","sfid":"a1i54000007NnmDAAS","SKU":"bas-2495-1324-5x8"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-5x8-composite","optional":false,"quantity":1,"sequence":2,"sfdcName":"CP-02994","sfid":"a0O54000003YNT5EAO"},{"AB2CComponentQuantity":1,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007NnmEAAS","componentR":{"SEOId":"2495-Basha-KL","sfid":"a1i54000007NnmEAAS","SKU":"bas-2495-1324-7x10"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-7x10-composite","optional":false,"quantity":1,"sequence":3,"sfdcName":"CP-02995","sfid":"a0O54000003YNT6EAO"},{"AB2CComponentQuantity":1,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007NnmFAAS","componentR":{"SEOId":"2495-Basha-KL","sfid":"a1i54000007NnmFAAS","SKU":"bas-2495-1324-8x11"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-8x11-composite","optional":false,"quantity":1,"sequence":4,"sfdcName":"CP-02996","sfid":"a0O54000003YNT7EAO"},{"AB2CComponentQuantity":1,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007NnmGAAS","componentR":{"SEOId":"2495-Basha-KL","sfid":"a1i54000007NnmGAAS","SKU":"bas-2495-1324-9x12"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-9x12-composite","optional":false,"quantity":1,"sequence":5,"sfdcName":"CP-02997","sfid":"a0O54000003YNT8EAO"},{"AB2CComponentQuantity":0,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007nlNEAAY","componentR":{"SEOId":"bas-2495-1324","sfid":"a1i54000007nlNEAAY","SKU":"bas-2495-1324-2x4-PROTECTION"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-2x4-protection-composite","optional":false,"quantity":1,"sequence":10,"sfdcName":"CP-11026","sfid":"a0O54000003kOXKEA2"},{"AB2CComponentQuantity":0,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007nlNFAAY","componentR":{"SEOId":"bas-2495-1324","sfid":"a1i54000007nlNFAAY","SKU":"bas-2495-1324-9x12-PROTECTION"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-9x12-protection-composite","optional":false,"quantity":1,"sequence":11,"sfdcName":"CP-11027","sfid":"a0O54000003kOXLEA2"}],"ownerId":"0054P00000AQOkZQAX","productSpecsS":[],"productStatus":"Released","productType":"Aggregated","quantityperunit":1,"SEOId":"2495-Basha-KL","sequence":149,"serviceFlag":true,"sfdcName":"Basha KL","sfid":"a1i54000007NnmBAAS","shortDesc":"<strong>Online Only</strong><br><br>The Basha KL Machine-Made Area Rug collection offers exciting, modern designs in smoky palettes of blacks, blues and greys. These soft, densely woven rugs will add comfort and style to your space for years to come.","SKU":"bas-2495","startDate":"2020-01-21","storefront":"DefaultStore;AlexanianStore","unitOfMeasure":"Each"}],"sizing":{"product":{"sz_assc":false,"sz_data":"sz_m","sz_rel":["Product_Item_I18Ns__r","FILTERED_ProductMedias","Product_Inventory_Items__r","Product_Specs__r"]}},"sptByAsc":true,"sptByProdId":{"version":1},"sptBySequence":true,"sptIsParentOnly":true,"sptList":[],"sptStorefront":"AlexanianStore","sptUnFiltered":true,"success":true,"version":11},"parseAttrPricingJSON":true,"priceListItems":{"a1i54000007nlNEAAY":{"entitledPLIs":[{"endDate":"2099-12-31","price":29.99,"pricelist":"a1U54000000FO9eEAG","pricelistItemId":"bas-2495-1324-2x4-protection-STDPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Standard Price List","sfid":"a1U54000000FO9eEAG"},"product":"a1i54000007nlNEAAY","productR":{"sfid":"a1i54000007nlNEAAY","SKU":"bas-2495-1324-2x4-PROTECTION"},"recurringPrice":false,"sfdcName":"031134","sfid":"a1T54000002Td2LEAS","startDate":"2020-01-27"}]},"a1i54000007nlNFAAY":{"entitledPLIs":[{"endDate":"2099-12-31","price":99.99,"pricelist":"a1U54000000FO9eEAG","pricelistItemId":"bas-2495-1324-9x12-protection-STDPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Standard Price List","sfid":"a1U54000000FO9eEAG"},"product":"a1i54000007nlNFAAY","productR":{"sfid":"a1i54000007nlNFAAY","SKU":"bas-2495-1324-9x12-PROTECTION"},"recurringPrice":false,"sfdcName":"031135","sfid":"a1T54000002Td2MEAS","startDate":"2020-01-27"}]},"a1i54000007NnmBAAS":{"entitledPLIs":[{"endDate":"2099-12-31","price":0,"pricelist":"a1U54000000FO9eEAG","pricelistItemId":"bas-2495-STDPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Standard Price List","sfid":"a1U54000000FO9eEAG"},"product":"a1i54000007NnmBAAS","productR":{"sfid":"a1i54000007NnmBAAS","SKU":"bas-2495"},"recurringPrice":false,"sfdcName":"021057","sfid":"a1T54000002CSN4EAO","startDate":"2020-01-27"},{"endDate":"2099-12-31","price":0,"pricelist":"a1U540000013h0ZEAQ","pricelistItemId":"bas-2495-SALEPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Sale Price List","sfid":"a1U540000013h0ZEAQ"},"product":"a1i54000007NnmBAAS","productR":{"sfid":"a1i54000007NnmBAAS","SKU":"bas-2495"},"recurringPrice":false,"sfdcName":"021529","sfid":"a1T54000002CSUgEAO","startDate":"2020-01-27"}]},"a1i54000007NnmCAAS":{"entitledPLIs":[{"endDate":"2099-12-31","price":69,"pricelist":"a1U54000000FO9eEAG","pricelistItemId":"bas-2495-1324-2x4-STDPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Standard Price List","sfid":"a1U54000000FO9eEAG"},"product":"a1i54000007NnmCAAS","productR":{"sfid":"a1i54000007NnmCAAS","SKU":"bas-2495-1324-2x4"},"recurringPrice":false,"sfdcName":"021058","sfid":"a1T54000002CSN5EAO","startDate":"2020-01-27"},{"endDate":"2099-12-31","price":55,"pricelist":"a1U540000013h0ZEAQ","pricelistItemId":"bas-2495-1324-2x4-SALEPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Sale Price List","sfid":"a1U540000013h0ZEAQ"},"product":"a1i54000007NnmCAAS","productR":{"sfid":"a1i54000007NnmCAAS","SKU":"bas-2495-1324-2x4"},"recurringPrice":false,"sfdcName":"021530","sfid":"a1T54000002CSUhEAO","startDate":"2020-01-27"}]},"a1i54000007NnmDAAS":{"entitledPLIs":[{"endDate":"2099-12-31","price":399,"pricelist":"a1U54000000FO9eEAG","pricelistItemId":"bas-2495-1324-5x8-STDPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Standard Price List","sfid":"a1U54000000FO9eEAG"},"product":"a1i54000007NnmDAAS","productR":{"sfid":"a1i54000007NnmDAAS","SKU":"bas-2495-1324-5x8"},"recurringPrice":false,"sfdcName":"021059","sfid":"a1T54000002CSN6EAO","startDate":"2020-01-27"},{"endDate":"2099-12-31","price":319,"pricelist":"a1U540000013h0ZEAQ","pricelistItemId":"bas-2495-1324-5x8-SALEPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Sale Price List","sfid":"a1U540000013h0ZEAQ"},"product":"a1i54000007NnmDAAS","productR":{"sfid":"a1i54000007NnmDAAS","SKU":"bas-2495-1324-5x8"},"recurringPrice":false,"sfdcName":"021531","sfid":"a1T54000002CSUiEAO","startDate":"2020-01-27"}]},"a1i54000007NnmEAAS":{"entitledPLIs":[{"endDate":"2099-12-31","price":629,"pricelist":"a1U54000000FO9eEAG","pricelistItemId":"bas-2495-1324-7x10-STDPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Standard Price List","sfid":"a1U54000000FO9eEAG"},"product":"a1i54000007NnmEAAS","productR":{"sfid":"a1i54000007NnmEAAS","SKU":"bas-2495-1324-7x10"},"recurringPrice":false,"sfdcName":"021060","sfid":"a1T54000002CSN7EAO","startDate":"2020-01-27"},{"endDate":"2099-12-31","price":503,"pricelist":"a1U540000013h0ZEAQ","pricelistItemId":"bas-2495-1324-7x10-SALEPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Sale Price List","sfid":"a1U540000013h0ZEAQ"},"product":"a1i54000007NnmEAAS","productR":{"sfid":"a1i54000007NnmEAAS","SKU":"bas-2495-1324-7x10"},"recurringPrice":false,"sfdcName":"021532","sfid":"a1T54000002CSUjEAO","startDate":"2020-01-27"}]},"a1i54000007NnmFAAS":{"entitledPLIs":[{"endDate":"2099-12-31","price":819,"pricelist":"a1U54000000FO9eEAG","pricelistItemId":"bas-2495-1324-8x11-STDPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Standard Price List","sfid":"a1U54000000FO9eEAG"},"product":"a1i54000007NnmFAAS","productR":{"sfid":"a1i54000007NnmFAAS","SKU":"bas-2495-1324-8x11"},"recurringPrice":false,"sfdcName":"021061","sfid":"a1T54000002CSN8EAO","startDate":"2020-01-27"},{"endDate":"2099-12-31","price":655,"pricelist":"a1U540000013h0ZEAQ","pricelistItemId":"bas-2495-1324-8x11-SALEPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Sale Price List","sfid":"a1U540000013h0ZEAQ"},"product":"a1i54000007NnmFAAS","productR":{"sfid":"a1i54000007NnmFAAS","SKU":"bas-2495-1324-8x11"},"recurringPrice":false,"sfdcName":"021533","sfid":"a1T54000002CSUkEAO","startDate":"2020-01-27"}]},"a1i54000007NnmGAAS":{"entitledPLIs":[{"endDate":"2099-12-31","price":1089,"pricelist":"a1U54000000FO9eEAG","pricelistItemId":"bas-2495-1324-9x12-STDPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Standard Price List","sfid":"a1U54000000FO9eEAG"},"product":"a1i54000007NnmGAAS","productR":{"sfid":"a1i54000007NnmGAAS","SKU":"bas-2495-1324-9x12"},"recurringPrice":false,"sfdcName":"021062","sfid":"a1T54000002CSN9EAO","startDate":"2020-01-27"},{"endDate":"2099-12-31","price":871,"pricelist":"a1U540000013h0ZEAQ","pricelistItemId":"bas-2495-1324-9x12-SALEPRICELIST","pricelistR":{"currencyISOCode":"CAD","sfdcName":"Sale Price List","sfid":"a1U540000013h0ZEAQ"},"product":"a1i54000007NnmGAAS","productR":{"sfid":"a1i54000007NnmGAAS","SKU":"bas-2495-1324-9x12"},"recurringPrice":false,"sfdcName":"021534","sfid":"a1T54000002CSUlEAO","startDate":"2020-01-27"}]}},"priceLists":{"a1U54000000FO9eEAG":{"currencyISOCode":"CAD","EAccountGroupPriceListsS":[{"pricelist":"a1U54000000FO9eEAG","sequence":500,"sfid":"a0354000002rxVoAAI"}],"enabled":true,"endDate":"2099-12-31","pricelistId":"STDPRICELIST","sfdcName":"Standard Price List","sfid":"a1U54000000FO9eEAG","startDate":"2020-01-27","storefront":"DefaultStore;AlexanianStore"},"a1U540000013h0ZEAQ":{"currencyISOCode":"CAD","EAccountGroupPriceListsS":[{"pricelist":"a1U540000013h0ZEAQ","sequence":500,"sfid":"a0354000001oMOVAA2"}],"enabled":true,"endDate":"2099-12-31","pricelistId":"SALEPRICELIST","sfdcName":"Sale Price List","sfid":"a1U540000013h0ZEAQ","startDate":"2020-03-09","storefront":"DefaultStore;AlexanianStore"},"a1U540000017lPsEAI":{"currencyISOCode":"CAD","EAccountGroupPriceListsS":[{"pricelist":"a1U540000017lPsEAI","sequence":500,"sfid":"a0354000003A7vaAAC"}],"enabled":true,"endDate":"2099-12-31","pricelistId":"SAMPLESPRICELIST","sfdcName":"Samples Price List","sfid":"a1U540000017lPsEAI","startDate":"2020-04-14","storefront":"DefaultStore;AlexanianStore"}},"prodIncludeAttrPricing":false,"prodIncludTierPricing":false,"prodPLIsToFullyQuery":[],"product":{"AB2CInStoreOnly":false,"AB2CIsComponent":false,"AB2CShowPerLinearFoot":false,"AB2CShowSquareFootageCalculator":false,"compositeProductsS":[{"AB2CComponentQuantity":1,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007NnmCAAS","componentR":{"SEOId":"2495-Basha-KL","sfid":"a1i54000007NnmCAAS","SKU":"bas-2495-1324-2x4"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-2x4-composite","optional":false,"quantity":1,"sequence":1,"sfdcName":"CP-02993","sfid":"a0O54000003YNT4EAO"},{"AB2CComponentQuantity":1,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007NnmDAAS","componentR":{"SEOId":"2495-Basha-KL","sfid":"a1i54000007NnmDAAS","SKU":"bas-2495-1324-5x8"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-5x8-composite","optional":false,"quantity":1,"sequence":2,"sfdcName":"CP-02994","sfid":"a0O54000003YNT5EAO"},{"AB2CComponentQuantity":1,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007NnmEAAS","componentR":{"SEOId":"2495-Basha-KL","sfid":"a1i54000007NnmEAAS","SKU":"bas-2495-1324-7x10"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-7x10-composite","optional":false,"quantity":1,"sequence":3,"sfdcName":"CP-02995","sfid":"a0O54000003YNT6EAO"},{"AB2CComponentQuantity":1,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007NnmFAAS","componentR":{"SEOId":"2495-Basha-KL","sfid":"a1i54000007NnmFAAS","SKU":"bas-2495-1324-8x11"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-8x11-composite","optional":false,"quantity":1,"sequence":4,"sfdcName":"CP-02996","sfid":"a0O54000003YNT7EAO"},{"AB2CComponentQuantity":1,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007NnmGAAS","componentR":{"SEOId":"2495-Basha-KL","sfid":"a1i54000007NnmGAAS","SKU":"bas-2495-1324-9x12"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-9x12-composite","optional":false,"quantity":1,"sequence":5,"sfdcName":"CP-02997","sfid":"a0O54000003YNT8EAO"},{"AB2CComponentQuantity":0,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007nlNEAAY","componentR":{"SEOId":"bas-2495-1324","sfid":"a1i54000007nlNEAAY","SKU":"bas-2495-1324-2x4-PROTECTION"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-2x4-protection-composite","optional":false,"quantity":1,"sequence":10,"sfdcName":"CP-11026","sfid":"a0O54000003kOXKEA2"},{"AB2CComponentQuantity":0,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007nlNFAAY","componentR":{"SEOId":"bas-2495-1324","sfid":"a1i54000007nlNFAAY","SKU":"bas-2495-1324-9x12-PROTECTION"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-9x12-protection-composite","optional":false,"quantity":1,"sequence":11,"sfdcName":"CP-11027","sfid":"a0O54000003kOXLEA2"}],"ownerId":"0054P00000AQOkZQAX","productSpecsS":[],"productStatus":"Released","productType":"Aggregated","quantityperunit":1,"SEOId":"2495-Basha-KL","sequence":149,"serviceFlag":true,"sfdcName":"Basha KL","sfid":"a1i54000007NnmBAAS","SKU":"bas-2495","startDate":"2020-01-21","storefront":"DefaultStore;AlexanianStore","unitOfMeasure":"Each"},"productList":[{"AB2CInStoreOnly":false,"AB2CIsComponent":false,"AB2CShowPerLinearFoot":false,"AB2CShowSquareFootageCalculator":false,"compositeProductsS":[{"AB2CComponentQuantity":1,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007NnmCAAS","componentR":{"SEOId":"2495-Basha-KL","sfid":"a1i54000007NnmCAAS","SKU":"bas-2495-1324-2x4"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-2x4-composite","optional":false,"quantity":1,"sequence":1,"sfdcName":"CP-02993","sfid":"a0O54000003YNT4EAO"},{"AB2CComponentQuantity":1,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007NnmDAAS","componentR":{"SEOId":"2495-Basha-KL","sfid":"a1i54000007NnmDAAS","SKU":"bas-2495-1324-5x8"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-5x8-composite","optional":false,"quantity":1,"sequence":2,"sfdcName":"CP-02994","sfid":"a0O54000003YNT5EAO"},{"AB2CComponentQuantity":1,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007NnmEAAS","componentR":{"SEOId":"2495-Basha-KL","sfid":"a1i54000007NnmEAAS","SKU":"bas-2495-1324-7x10"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-7x10-composite","optional":false,"quantity":1,"sequence":3,"sfdcName":"CP-02995","sfid":"a0O54000003YNT6EAO"},{"AB2CComponentQuantity":1,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007NnmFAAS","componentR":{"SEOId":"2495-Basha-KL","sfid":"a1i54000007NnmFAAS","SKU":"bas-2495-1324-8x11"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-8x11-composite","optional":false,"quantity":1,"sequence":4,"sfdcName":"CP-02996","sfid":"a0O54000003YNT7EAO"},{"AB2CComponentQuantity":1,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007NnmGAAS","componentR":{"SEOId":"2495-Basha-KL","sfid":"a1i54000007NnmGAAS","SKU":"bas-2495-1324-9x12"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-9x12-composite","optional":false,"quantity":1,"sequence":5,"sfdcName":"CP-02997","sfid":"a0O54000003YNT8EAO"},{"AB2CComponentQuantity":0,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007nlNEAAY","componentR":{"SEOId":"bas-2495-1324","sfid":"a1i54000007nlNEAAY","SKU":"bas-2495-1324-2x4-PROTECTION"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-2x4-protection-composite","optional":false,"quantity":1,"sequence":10,"sfdcName":"CP-11026","sfid":"a0O54000003kOXKEA2"},{"AB2CComponentQuantity":0,"AB2CComponentRequiresCalculator":false,"component":"a1i54000007nlNFAAY","componentR":{"SEOId":"bas-2495-1324","sfid":"a1i54000007nlNFAAY","SKU":"bas-2495-1324-9x12-PROTECTION"},"composite":"a1i54000007NnmBAAS","compositeProductId":"bas-2495-1324-9x12-protection-composite","optional":false,"quantity":1,"sequence":11,"sfdcName":"CP-11027","sfid":"a0O54000003kOXLEA2"}],"ownerId":"0054P00000AQOkZQAX","productSpecsS":[],"productStatus":"Released","productType":"Aggregated","quantityperunit":1,"SEOId":"2495-Basha-KL","sequence":149,"serviceFlag":true,"sfdcName":"Basha KL","sfid":"a1i54000007NnmBAAS","SKU":"bas-2495","startDate":"2020-01-21","storefront":"DefaultStore;AlexanianStore","unitOfMeasure":"Each"}],"productPricingData":{},"selectedPLIs":[],"sellerFlag":false,"sptByProdId":{"version":1},"version":11}';
        Map<String, Object> inputData = (Map<String, Object>) JSON.deserializeUntyped(jsonInput);

        Map<String,Object> response = service.evaluateAggregatePricing(inputData);
        
        Map<String, Object> product = (Map<String, Object>)response.get('product');
        Decimal minPrice = (Decimal) product.get('minPrice');

        system.assert(minPrice == null);
    }
}